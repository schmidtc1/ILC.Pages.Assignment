<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- CDN for DataTables css -->
	<link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.dataTables.css" />
    <title>Assignment</title>
</head>
<body>
    <div id="results"></div>
</body>
<!-- CDNs for jQuery and DataTables js -->
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="https://cdn.datatables.net/2.0.3/js/dataTables.js"></script>

<script id="data" type="application/json">
	[
		{
			"so_num": "1000",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "Call front desk to confirm order",
			"shipto_name": "Allen's Groceries",
			"so_taxrate": 0,
			"so_totalprice": 15936.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1001",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "Only sending 16lbs flour and closing short, confirmed w/ Peggy in their A/P office",
			"shipto_name": "Mark Bennett",
			"so_taxrate": 0,
			"so_totalprice": 520.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1002",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Eric Washburn",
			"so_taxrate": 0,
			"so_totalprice": 2800.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1003",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Karen Smith",
			"so_taxrate": 0,
			"so_totalprice": 24.900000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1004",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Eric Washburn",
			"so_taxrate": 0,
			"so_totalprice": 1017.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1005",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mark Bennett",
			"so_taxrate": 0,
			"so_totalprice": 397.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1007",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Patricia Beverages",
			"so_taxrate": 0,
			"so_totalprice": 66.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1009",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Jim's Bake Shop",
			"so_taxrate": 0.0625,
			"so_totalprice": 5.310000000,
			"so_totaltax": 0.310000000
		},
		{
			"so_num": "1009-return",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "Created from RMA #1009-RMA",
			"shipto_name": "Jim's Bake Shop",
			"so_taxrate": 0.0625,
			"so_totalprice": -5.310000000,
			"so_totaltax": -0.310000000
		},
		{
			"so_num": "1011",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Candie Walker",
			"so_taxrate": 0,
			"so_totalprice": 3402.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1012",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Patricia Beverages",
			"so_taxrate": 0,
			"so_totalprice": 180.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1013",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mountaineer Catering",
			"so_taxrate": 0,
			"so_totalprice": 250.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1014",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Karen Smith",
			"so_taxrate": 0,
			"so_totalprice": 17.500000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1015",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Jim Raynor",
			"so_taxrate": 0.0625,
			"so_totalprice": 95.630000000,
			"so_totaltax": 5.630000000
		},
		{
			"so_num": "1016",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Baker Frontier",
			"so_taxrate": 0,
			"so_totalprice": 59.250000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1017",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Allen's Groceries",
			"so_taxrate": 0,
			"so_totalprice": 165.300000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1018",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Jim's Bake Shop 2",
			"so_taxrate": 0.0625,
			"so_totalprice": 1115.630000000,
			"so_totaltax": 65.630000000
		},
		{
			"so_num": "1019",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Jim's Bake Shop 2",
			"so_taxrate": 0.0625,
			"so_totalprice": 124.950000000,
			"so_totaltax": 7.350000000
		},
		{
			"so_num": "1020",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Patricia Beverages",
			"so_taxrate": 0,
			"so_totalprice": 32.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1021",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mark Bennett",
			"so_taxrate": 0,
			"so_totalprice": 397.500000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1022",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mountaineer Catering",
			"so_taxrate": 0,
			"so_totalprice": 128.350000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1023",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "Wedding event, be early",
			"shipto_name": "Mountaineer Catering",
			"so_taxrate": 0,
			"so_totalprice": 180.960000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1024",
			"so_datecreated": "2024-02-03 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Allen's Groceries",
			"so_taxrate": 0,
			"so_totalprice": 30.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1026",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Candie Walker",
			"so_taxrate": 0,
			"so_totalprice": 97.500000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1027",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Eric Washburn",
			"so_taxrate": 0,
			"so_totalprice": 28.250000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1028",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Patricia Beverages",
			"so_taxrate": 0,
			"so_totalprice": 83.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1029",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Baker Frontier",
			"so_taxrate": 0,
			"so_totalprice": 126.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1030",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Candie Walker",
			"so_taxrate": 0,
			"so_totalprice": 194.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1031",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mark Bennett",
			"so_taxrate": 0,
			"so_totalprice": 16.750000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1033",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Baker Frontier",
			"so_taxrate": 0,
			"so_totalprice": 101.890000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1034",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mountaineer Catering",
			"so_taxrate": 0,
			"so_totalprice": 17.890000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1035",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Baker Frontier",
			"so_taxrate": 0,
			"so_totalprice": 21.390000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1037",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Candie Walker",
			"so_taxrate": 0,
			"so_totalprice": 97.500000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1038",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Karen Smith",
			"so_taxrate": 0,
			"so_totalprice": 8.890000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1039",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Candie Walker",
			"so_taxrate": 0,
			"so_totalprice": 216.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1040",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Allen's Groceries",
			"so_taxrate": 0,
			"so_totalprice": 1510.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1041",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Eric Washburn",
			"so_taxrate": 0,
			"so_totalprice": 5.440000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1042",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Eric Washburn",
			"so_taxrate": 0,
			"so_totalprice": 5.440000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1043",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mark Bennett",
			"so_taxrate": 0,
			"so_totalprice": 28.900000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1044",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mark Bennett",
			"so_taxrate": 0,
			"so_totalprice": 28.900000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1045",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Baker Frontier",
			"so_taxrate": 0,
			"so_totalprice": 170.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1046",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Jim Raynor",
			"so_taxrate": 0.0625,
			"so_totalprice": 34.000000000,
			"so_totaltax": 2.000000000
		},
		{
			"so_num": "1048",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Jim's Bake Shop",
			"so_taxrate": 0.0625,
			"so_totalprice": 32.410000000,
			"so_totaltax": 1.910000000
		},
		{
			"so_num": "1049",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Candie Walker",
			"so_taxrate": 0,
			"so_totalprice": 77.890000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1050",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mountaineer Catering",
			"so_taxrate": 0,
			"so_totalprice": 65.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1051",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mountaineer Catering",
			"so_taxrate": 0,
			"so_totalprice": 60.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1052",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Karen Smith",
			"so_taxrate": 0,
			"so_totalprice": 6.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1053",
			"so_datecreated": "2024-02-08 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mark Bennett",
			"so_taxrate": 0,
			"so_totalprice": 67.900000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1054",
			"so_datecreated": "2024-03-09 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Jim's Bake Shop",
			"so_taxrate": 0.0625,
			"so_totalprice": 185.940000000,
			"so_totaltax": 10.940000000
		},
		{
			"so_num": "1055",
			"so_datecreated": "2024-03-09 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Baker Frontier",
			"so_taxrate": 0,
			"so_totalprice": -85.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1056",
			"so_datecreated": "2024-03-09 04:47:42.000000",
			"so_note": "",
			"shipto_name": "Mark Bennett",
			"so_taxrate": 0,
			"so_totalprice": 397.000000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "1057",
			"so_datecreated": "2024-03-25 03:06:16.781000",
			"so_note": "Created from RMA #2",
			"shipto_name": "Allen's Groceries",
			"so_taxrate": 0,
			"so_totalprice": -2.500000000,
			"so_totaltax": 0.000000000
		},
		{
			"so_num": "#1001",
			"so_datecreated": "2024-03-30 00:00:00.000000",
			"so_note": "",
			"shipto_name": "Karine Ruby",
			"so_taxrate": 0,
			"so_totalprice": 1383.910000000,
			"so_totaltax": 0.000000000
		}
	]    
</script>

<script type="text/javascript">
	/* Once document is ready, perform the following steps:
		Parse the data JSON provided in the HTML page
		At runtime add the DataTables table element
		Attach/bind/link the JSON data into DataTable
		Render the DataTable
	*/
	$(document).ready(function() {
		/* Parse JSON */
		var res = JSON.parse(document.getElementById("data").textContent);

		/* Create DataTables table element and append to div */
		var table = document.createElement("table");
		var div = document.getElementById("results");
		div.appendChild(table);

		/* Stack overflow for creating HTML table element and converting to a DataTable at runtime: 
		https://stackoverflow.com/questions/51435592/how-to-create-jquery-data-table-from-json-array-without-declaring-columns */

		table.setAttribute("id", "display");
		$("#display").DataTable({
			data: res.map(function(obj) {
				/* Intl object for formatting variables: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl */
				// Format tax rate as percent
				obj.so_taxrate = new Intl.NumberFormat("en-US", {style: "percent", minimumFractionDigits: 2}).format(obj.so_taxrate);

				// Format price and tax as currency
				const currencyFormat = new Intl.NumberFormat("en-US", {style: "currency", currency: "USD"});

				obj.so_totalprice = currencyFormat.format(obj.so_totalprice);
				obj.so_totaltax = currencyFormat.format(obj.so_totaltax);

				// Format date as mm/dd/yyyy
				const date = new Date(obj.so_datecreated);
				const dateFormatted = new Intl.DateTimeFormat("en-US", {
					year: "numeric",
					month: "2-digit",
					day: "2-digit"
					}).format(date);
				obj.so_datecreated = dateFormatted;
				return obj;
			}),
			columns: Object.keys(res[0]).map(function(item) { 
				return { data: item, title: item } // title is required to set the column header if you do not initialize thead/th elements
			})
		});

	})
</script>
</html>
